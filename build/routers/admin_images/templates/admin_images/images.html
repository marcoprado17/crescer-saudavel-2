{% extends "admin_base/admin_base.html" %}
{% import "flask_bombril_macros/utils.html" as utils with context %}
{% block subtitle %}
    {{ R.string.images }}
{% endblock %}
{% block content %}
    <div class="__admin_images__ __images__ container">
        {{ utils.page_header(R.string.images) }}
        {% with data=data %}
            {% include "components/super_table.html" %}
        {% endwith %}
    </div>
{% endblock %}
{% block script %}
    <script>
        $("form.remove").each(function(){
            var form = $(this);
            var button = form.find("button");
            var image_name = form.attr("image-name");
            setAjaxFormHandlers({
                form: form,
                minResponseTime: DEFAULT_RESPONSE_TIME,
                onSubmit: function () {
                    button.html("{{ R.string.removing }}");
                    button.prop("disabled", true);
                },
                success: function () {
                    button.html("{{ R.string.image_removed }}");
                },
                error: function () {
                    button.prop("disabled", false);
                    button.html("{{ R.string.remove }}");
                    throwErrorOpToast("{{ R.string.remove_image_error }}".f(image_name));
                }
            })
        })
    </script>
{% endblock %}