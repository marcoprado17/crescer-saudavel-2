{% macro specific_alert(message, bootstrap_level, dismissible) %}
    <div class="alert alert-{{ bootstrap_level }} {{ 'alert-dismissible'|if(dismissible) }}" role="alert">
        {% if dismissible %}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        {% endif %}
        {{ message }}
    </div>
{%- endmacro %}

{% macro alert(message, level=None, dismissible=False) %}
    {% if level == None %}
        {% set level=bombril_R.string.info %}
    {% endif %}
    {% if level == bombril_R.string.success %}
        {{ specific_alert(message=message, bootstrap_level="success", dismissible=dismissible) }}
    {% elif level == bombril_R.string.info %}
        {{ specific_alert(message=message, bootstrap_level="info", dismissible=dismissible) }}
    {% elif level == bombril_R.string.warning %}
        {{ specific_alert(message=message, bootstrap_level="warning", dismissible=dismissible) }}
    {% elif level == bombril_R.string.error %}
        {{ specific_alert(message=message, bootstrap_level="danger", dismissible=dismissible) }}
    {% endif %}
{%- endmacro %}

{% macro flash() %}
    {% for category, message in get_flashed_messages(with_categories=true) %}
        {% if category|is_static %}
            {{ alert(message=message, level=category|get_level, dismissible=True) }}
        {% endif %}
    {% endfor %}
{%- endmacro %}
