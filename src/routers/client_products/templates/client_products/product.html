{% extends "client_base/client_base.html" %}
{% block title %}
    {{ R.string.product }}
{% endblock %}
{% block content %}
    <div class="__client_products__ __product__">
        {% with data=data.page_heading_data %}
            {% include "components/client_page_heading.html" %}
        {% endwith %}

        <div class="main-container col1-layout wow bounceInUp animated">
            <div class="main">
                <div class="col-main">
                    <div class="product-view wow bounceInUp animated" itemscope="" itemtype="http://schema.org/Product"
                         itemid="#product_base">
                        <div id="messages_product_view"></div>
                        <div class="product-essential container">
                            <div class="row">
                                <form action="#" method="post" id="product_addtocart_form">
                                    {% if data.images_src and data.images_src|length > 0 %}
                                        <div class="product-img-box col-sm-6 col-xs-12">
                                            {% if data.in_stock %}
                                                <div class="alert alert-success" role="alert">
                                                    <span class="glyphicon glyphicon-ok"
                                                          aria-hidden="true"></span>{{ R.string.in_stock }}
                                                </div>
                                            {% else %}
                                                <div class="alert alert-danger" role="alert">
                                                    <span class="glyphicon glyphicon-remove"
                                                          aria-hidden="true"></span>{{ R.string.without_stock }}
                                                </div>
                                            {% endif %}
                                            <div class="product-image">
                                                <div class="large-image">
                                                    <img id="main-image" src="{{ data.images_src[0] }}"
                                                         alt="{{ R.string.product_image }}">
                                                </div>
                                                <div class="flexslider flexslider-thumb">
                                                    <ul class="previews-list slides">
                                                        {% for img_src in data.images_src %}
                                                            <li>
                                                                <a>
                                                                    <img class="secondary-image" src="{{ img_src }}"
                                                                        alt="{{ R.string.product_image }}"/>
                                                                </a>
                                                            </li>
                                                        {% endfor %}
                                                        <li></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                    <div class="product-shop col-sm-6 col-xs-12">
                                        <div class="product-name">
                                            <h1 itemprop="name">{{ data.title }}</h1>
                                        </div>
                                        <div itemprop="aggregateRating" itemscope=""
                                             itemtype="http://schema.org/AggregateRating">
                                        </div>
                                        <div class="price-block">
                                            <div class="price-box"><span class="regular-price"><span
                                                    class="price">{{ data.price }}</span></span></div>
                                        </div>
                                        <div class="short-description">
                                            <h2>{{ R.string.summary }}</h2>
                                            {{ data.summary|safe }}
                                        </div>
                                        {% if data.in_stock %}
                                            <div class="add-to-box">
                                                <div class="add-to-cart">
                                                    <div class="pull-left">
                                                        <div class="custom pull-left">
                                                            <button
                                                                    onClick="var result = document.getElementById('qty'); var qty = result.value; if( !isNaN( qty )) result.value++;return false;"
                                                                    class="increase items-count" type="button"><i
                                                                    class="icon-plus"></i></button>
                                                            <input type="text" name="qty" id="qty" maxlength="12"
                                                                   value="1" title="Quantity:"
                                                                   class="input-text qty">
                                                            <button
                                                                    onClick="var result = document.getElementById('qty'); var qty = result.value; if( !isNaN( qty ) &amp;&amp; qty &gt; 0 ) result.value--;return false;"
                                                                    class="reduced items-count" type="button"><i
                                                                    class="icon-minus"></i></button>
                                                        </div>
                                                    </div>
                                                    {#                                                    TODO: Implement add to cart#}
                                                    <button type="button" title="Add to Cart" class="button btn-cart"
                                                            onClick="productAddToCartForm.submit(this)"></button>
                                                </div>
                                            </div>
                                        {% else %}
                                            <div class="alert alert-warning"
                                                 role="alert">{{ R.string.unavailable_product_at_moment }}
                                            </div>
                                        {% endif %}
                                    </div>
                                </form>
                            </div>
                        </div>
                        {% if data.sections and data.sections|length > 0 %}
                            <div class="product-collateral container">
                                <ul id="product-detail-tab" class="nav nav-tabs product-tabs">
                                    {% for section in data.sections %}
                                        <li class="{{ 'active'|if(loop.first) }}">
                                            <a href={{ "#" + section.id }} data-toggle="tab">{{ section.title }}</a>
                                        </li>
                                    {% endfor %}
                                </ul>
                                <div id="productTabContent" class="tab-content">
                                    {% for section in data.sections %}
                                        <div class="tab-pane fade in {{ 'active'|if(loop.first) }}"
                                             id="{{ section.id }}">
                                            <div class="std markdown-parsed-container">
                                                {{ section.content|safe }}
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block script %}
    <script>
        $(function () {
            $(".secondary-image").each(function () {
                $(this).click(function () {
                    $("#main-image").attr("src", $(this).attr("src"));
                });
            });
        });
    </script>
{% endblock %}